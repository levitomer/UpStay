let express,open,routes,reservationsService,serverDev,serverIO,db,EventEmitter;_a05‍.w("express",[["default",["express"],function(v){express=v}]]);_a05‍.w("open",[["default",["open"],function(v){open=v}]]);_a05‍.w("@upstay/routes",[["default",["routes"],function(v){routes=v}]]);_a05‍.w("@upstay/services/reservations",[["*",null,function(v){reservationsService=v}]]);_a05‍.w("./server.dev",[["default",["serverDev"],function(v){serverDev=v}]]);_a05‍.w("./server.io",[["default",["serverIO"],function(v){serverIO=v}]]);_a05‍.w("@upstay/db/reservations",[["*",null,function(v){db=v}]]);_a05‍.w("events",[["default",["EventEmitter"],function(v){EventEmitter=v}]]);








const emitter = new EventEmitter();
const app = express();
const port = process.env.PORT || 9999;
const appURL = `http://localhost:${port}`;

app.use(express.json());
app.use(express.urlencoded({ extended: false }));
app.use(express.static('public'));

app.use(routes);
serverDev(app);

// socket.io server
const server = serverIO(app, socket => {
    reservationsService.start(reservation => {
        _a05‍.g.console.log(reservation);
        db.addReservation(reservation);
    });
});

server.listen(port, () => {
    console.log(`Server started ${appURL}`);
    emitter.emit('connection');
    open(appURL);
});
